var BASE_ESV_URL = 'https://www.esv.org/verses/';

var BASE_IFRAME_URL = 'https://www.esv.org/crossref/';

var IGNORE_CLASS = 'esv-crossref-ignore';

var IGNORE_TAGS = ['A', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6'];

var VALID_OPTIONS = ['border_color', 'border_radius', 'header_font_family', 'header_font_size', 'header_font_color', 'header_background_color', 'body_font_family', 'body_font_size', 'body_font_color', 'body_background_color', 'footer_font_family', 'footer_font_size', 'footer_font_color', 'footer_background_color'];

var REGEX = /\b((?:(?:(?:Second|First|Scnd|Frst|Sec|Fst|2nd|1st|Se|Sc|II|I|2|1)\s?(?:Thessalonions|Thessalonians|Corinthians|Corinthian|Chronicles|Chronicle|Corinthi|Chronicl|Timothy|Thessal|Corinth|Chronic|Timoth|Samuel|Chroni|Thess|Peter|Kings|Cortn|Corth|Corin|Chron|Thes|Saml|Petr|Pete|King|John|Cori|Chrs|Chro|Tim|Sam|Ptr|Pet|Kgs|Joh|Jhn|Cor|Chs|Chr|Tm|Ti|Th|Sm|Sa|Pt|Pe|Ks|Kn|Ki|Kg|Jo|Jn|Jn|Co|Ch|P|K|J))|(?:(?:Second|First|Scnd|Frst|Sec|Fst|2nd|1st|Se|Sc|II|I|2|1)(?:S))|(?:(?:Third|Thir|Thi|III|3rd|Th|3)\s?(?:John|Joh|Jhn|Jo|Jn|Jn|J))|Canticle\sof\sCanticles|The\sSong\sof\sSolomon|ConticleofCanticles|TheSongofSolomon|The\sSong\sof\sSol|Song\sof\sSolomon|The\sRevelation|Thessalonions|Thessalonians|SongofSolomon|Song\sof\sSongs|TheSongofSol|Phillippians|Lamentations|Ecclesiastes|SongofSongs|Song\sof\sSol|Revelations|Phillipians|Philippians|Lamentation|Eclesiastes|Ecclesiaste|Dueteronomy|Deuteronomy|Corinthians|Zecharaiah|Revelation|Philipians|Corinthian|Colossians|Chronicles|Zephaniah|Zechariah|Zachariah|SongofSol|Phillemon|Leviticus|Habbakkuk|Galations|Galatians|Ephesians|Colossian|Colosians|Chronicle|Canticles|Qoheleth|Proverbs|Philemon|Obadaiah|Nehemiah|Jeremiah|Jeremaih|Habbakuk|Habakkuk|Galatian|Ephesian|Corinthi|Chronicl|Timothy|Thessal|Song\sof|Solomon|Proverb|Philipp|Obadiah|Obadaih|Numbers|Matthew|Malachi|Hebrews|Habakuk|Genesis|Ezekiel|Corinth|Chronic|Timoth|Songof|Samuel|Romans|Psalms|Philip|Philem|Number|Mathew|Judges|Joshua|Isaiah|Hebrew|Haggia|Haggai|Exodus|Esther|Eccles|Daniel|Chroni|Titus|Thess|Roman|Psalm|Prvbs|Philm|Phile|Peter|Nahum|Micah|Kings|Juges|Judgs|Jonah|James|Hosea|Hagai|Galat|Ephes|Cortn|Corth|Corin|Chron|Zeph|Zech|Thes|Song|Saml|Ruth|Pslm|Prov|Phlm|Phil|Petr|Pete|Obad|Numb|Mica|Matt|Mark|Luke|Levi|King|Judg|Jude|Josh|John|John|Joel|Jere|Jdgs|Jame|Isai|Isah|Hagg|Ezra|Ezek|Exod|Esth|Ephs|Ephe|Ecll|Eccl|Deut|Cori|Chrs|Chro|Amos|Acts|Zep|Zec|Tit|Tim|Sng|Sam|SOS|Rth|Rom|Rev|Qoh|Ptr|Pss|Psm|Psa|Prv|Pro|Php|Phm|Phl|Phi|Pet|Obd|Oba|Num|Neh|Nah|Mrk|Mic|Mat|Mar|Mal|Luk|Lev|Lam|Kgs|Jud|Jsh|Jos|Jon|Joh|Joh|Joe|Job|Jnh|Jms|Jhn|Jhn|Jgs|Jer|Jdg|Jas|Jam|Isa|Hos|Heb|Hbk|Hag|Hab|Gen|Gal|Ezr|Ezk|Eze|Exo|Exd|Est|Eph|Ecl|Ecc|Deu|Dan|Cor|Col|Col|Chs|Chr|Ams|Amo|Act|Zp|Zc|Tt|Tm|Ti|Th|So|Sm|Sg|Sa|SS|Rv|Ru|Rt|Ro|Rm|Rh|Re|Qo|Pt|Ps|Pr|Pp|Pm|Ph|Pe|Ob|Nu|Nm|Ne|Nb|Na|Mt|Mr|Ml|Mk|Mi|Ma|Lv|Lu|Lm|Lk|Le|La|Ks|Kn|Ki|Kg|Ju|Js|Jr|Jo|Jn|Jn|Jn|Jn|Jm|Jl|Jg|Je|Jd|Jb|Ja|Is|Hs|Ho|Hk|Hg|He|Hb|Gn|Gl|Ge|Ga|Ez|Ex|Es|Ep|Ec|Du|Dt|Dn|De|Da|Cs|Co|Co|Cl|Ch|Am|Ac|Q|P|K|J|J)\.?\s?(?:(?:(?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?)[:\.](?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?)(?:[:\.](?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?))?)|(?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?))(?!\s?(?:Thessalonions|Thessalonians|Corinthians|Corinthian|Chronicles|Chronicle|Corinthi|Chronicl|Timothy|Thessal|Corinth|Chronic|Timoth|Samuel|Chroni|Thess|Peter|Kings|Cortn|Corth|Corin|Chron|Thes|Saml|Petr|Pete|King|John|Cori|Chrs|Chro|Tim|Sam|Ptr|Pet|Kgs|Joh|Jhn|Cor|Chs|Chr|Tm|Ti|Th|Sm|Sa|Pt|Pe|Ks|Kn|Ki|Kg|Jo|Jn|Jn|Co|Ch|S|P|K|J)\b)(?:[,;]?\s?(?:(?:(?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?)[:\.](?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?)(?:[:\.](?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?))?)|(?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?))(?!\s?(?:Thessalonions|Thessalonians|Corinthians|Corinthian|Chronicles|Chronicle|Corinthi|Chronicl|Timothy|Thessal|Corinth|Chronic|Timoth|Samuel|Chroni|Thess|Peter|Kings|Cortn|Corth|Corin|Chron|Thes|Saml|Petr|Pete|King|John|Cori|Chrs|Chro|Tim|Sam|Ptr|Pet|Kgs|Joh|Jhn|Cor|Chs|Chr|Tm|Ti|Th|Sm|Sa|Pt|Pe|Ks|Kn|Ki|Kg|Jo|Jn|Jn|Co|Ch|S|P|K|J)\b))*(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\s?(?:(?:(?:(?:Second|First|Scnd|Frst|Sec|Fst|2nd|1st|Se|Sc|II|I|2|1)\s?(?:Thessalonions|Thessalonians|Corinthians|Corinthian|Chronicles|Chronicle|Corinthi|Chronicl|Timothy|Thessal|Corinth|Chronic|Timoth|Samuel|Chroni|Thess|Peter|Kings|Cortn|Corth|Corin|Chron|Thes|Saml|Petr|Pete|King|John|Cori|Chrs|Chro|Tim|Sam|Ptr|Pet|Kgs|Joh|Jhn|Cor|Chs|Chr|Tm|Ti|Th|Sm|Sa|Pt|Pe|Ks|Kn|Ki|Kg|Jo|Jn|Jn|Co|Ch|P|K|J))|(?:(?:Second|First|Scnd|Frst|Sec|Fst|2nd|1st|Se|Sc|II|I|2|1)(?:S))|(?:(?:Third|Thir|Thi|III|3rd|Th|3)\s?(?:John|Joh|Jhn|Jo|Jn|Jn|J))|Canticle\sof\sCanticles|The\sSong\sof\sSolomon|ConticleofCanticles|TheSongofSolomon|The\sSong\sof\sSol|Song\sof\sSolomon|The\sRevelation|Thessalonions|Thessalonians|SongofSolomon|Song\sof\sSongs|TheSongofSol|Phillippians|Lamentations|Ecclesiastes|SongofSongs|Song\sof\sSol|Revelations|Phillipians|Philippians|Lamentation|Eclesiastes|Ecclesiaste|Dueteronomy|Deuteronomy|Corinthians|Zecharaiah|Revelation|Philipians|Corinthian|Colossians|Chronicles|Zephaniah|Zechariah|Zachariah|SongofSol|Phillemon|Leviticus|Habbakkuk|Galations|Galatians|Ephesians|Colossian|Colosians|Chronicle|Canticles|Qoheleth|Proverbs|Philemon|Obadaiah|Nehemiah|Jeremiah|Jeremaih|Habbakuk|Habakkuk|Galatian|Ephesian|Corinthi|Chronicl|Timothy|Thessal|Song\sof|Solomon|Proverb|Philipp|Obadiah|Obadaih|Numbers|Matthew|Malachi|Hebrews|Habakuk|Genesis|Ezekiel|Corinth|Chronic|Timoth|Songof|Samuel|Romans|Psalms|Philip|Philem|Number|Mathew|Judges|Joshua|Isaiah|Hebrew|Haggia|Haggai|Exodus|Esther|Eccles|Daniel|Chroni|Titus|Thess|Roman|Psalm|Prvbs|Philm|Phile|Peter|Nahum|Micah|Kings|Juges|Judgs|Jonah|James|Hosea|Hagai|Galat|Ephes|Cortn|Corth|Corin|Chron|Zeph|Zech|Thes|Song|Saml|Ruth|Pslm|Prov|Phlm|Phil|Petr|Pete|Obad|Numb|Mica|Matt|Mark|Luke|Levi|King|Judg|Jude|Josh|John|John|Joel|Jere|Jdgs|Jame|Isai|Isah|Hagg|Ezra|Ezek|Exod|Esth|Ephs|Ephe|Ecll|Eccl|Deut|Cori|Chrs|Chro|Amos|Acts|Zep|Zec|Tit|Tim|Sng|Sam|SOS|Rth|Rom|Rev|Qoh|Ptr|Pss|Psm|Psa|Prv|Pro|Php|Phm|Phl|Phi|Pet|Obd|Oba|Num|Neh|Nah|Mrk|Mic|Mat|Mar|Mal|Luk|Lev|Lam|Kgs|Jud|Jsh|Jos|Jon|Joh|Joh|Joe|Job|Jnh|Jms|Jhn|Jhn|Jgs|Jer|Jdg|Jas|Jam|Isa|Hos|Heb|Hbk|Hag|Hab|Gen|Gal|Ezr|Ezk|Eze|Exo|Exd|Est|Eph|Ecl|Ecc|Deu|Dan|Cor|Col|Col|Chs|Chr|Ams|Amo|Act|Zp|Zc|Tt|Tm|Ti|Th|So|Sm|Sg|Sa|SS|Rv|Ru|Rt|Ro|Rm|Rh|Re|Qo|Pt|Ps|Pr|Pp|Pm|Ph|Pe|Ob|Nu|Nm|Ne|Nb|Na|Mt|Mr|Ml|Mk|Mi|Ma|Lv|Lu|Lm|Lk|Le|La|Ks|Kn|Ki|Kg|Ju|Js|Jr|Jo|Jn|Jn|Jn|Jn|Jm|Jl|Jg|Je|Jd|Jb|Ja|Is|Hs|Ho|Hk|Hg|He|Hb|Gn|Gl|Ge|Ga|Ez|Ex|Es|Ep|Ec|Du|Dt|Dn|De|Da|Cs|Co|Co|Cl|Ch|Am|Ac|Q|P|K|J|J)\.?\s?)(?:(?:(?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?)[:\.](?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?)(?:[:\.](?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?))?)|(?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?))(?!\s?(?:Thessalonions|Thessalonians|Corinthians|Corinthian|Chronicles|Chronicle|Corinthi|Chronicl|Timothy|Thessal|Corinth|Chronic|Timoth|Samuel|Chroni|Thess|Peter|Kings|Cortn|Corth|Corin|Chron|Thes|Saml|Petr|Pete|King|John|Cori|Chrs|Chro|Tim|Sam|Ptr|Pet|Kgs|Joh|Jhn|Cor|Chs|Chr|Tm|Ti|Th|Sm|Sa|Pt|Pe|Ks|Kn|Ki|Kg|Jo|Jn|Jn|Co|Ch|S|P|K|J)\b)(?:[,;]?\s?(?:(?:(?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?)[:\.](?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?)(?:[:\.](?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?))?)|(?:\b\d{1,3}[a-e]?(?:ff)?\b(?:(?:[â€â€‘â€’â€“â€”â€•-]|\&(?:#8208|#8209|#8210|#8211|#8212|#8213|ndash|mdash);)\b\d{1,3}[a-e]?(?:ff)?\b)?))(?!\s?(?:Thessalonions|Thessalonians|Corinthians|Corinthian|Chronicles|Chronicle|Corinthi|Chronicl|Timothy|Thessal|Corinth|Chronic|Timoth|Samuel|Chroni|Thess|Peter|Kings|Cortn|Corth|Corin|Chron|Thes|Saml|Petr|Pete|King|John|Cori|Chrs|Chro|Tim|Sam|Ptr|Pet|Kgs|Joh|Jhn|Cor|Chs|Chr|Tm|Ti|Th|Sm|Sa|Pt|Pe|Ks|Kn|Ki|Kg|Jo|Jn|Jn|Co|Ch|S|P|K|J)\b))*)*)\b/gi;

var BOOK_NAME_MAP = { 'genesis': ['ge', 'gn', 'gen', 'genesis'], 'exodus': ['ex', 'exo', 'exd', 'exod', 'exodus'], 'leviticus': ['leviticus', 'levi', 'le', 'lv', 'lev'], 'numbers': ['nb', 'num', 'nm', 'numbers', 'nu', 'numb', 'number'], 'deuteronomy': ['de', 'deut', 'dueteronomy', 'du', 'deu', 'dt', 'deuteronomy'], 'joshua': ['josh', 'js', 'jos', 'joshua', 'jsh'], 'judges': ['juges', 'jdg', 'jg', 'jgs', 'jdgs', 'judgs', 'judg', 'judges'], 'ruth': ['rt', 'rth', 'ru', 'ruth', 'rh'], '1 samuel': ['1saml', 'firstsam', 'isamuel', '1samuel', 'ism', '1sm', 'firsts', 'isam', 'sa', '1stsam', '1stsamuel', 'firstsamuel', 'fstsam', 'fstsaml', 'firstsm', 'frstsam', '1sa', '1stsm', 'sam', '1sam', '1stsaml', 'frstsa', 'saml', 'frstsamuel', 'firstsa', '1sts', '1s', '1stsa', 'firstsaml', 'samuel', 'isaml', 'fstsa', 'frstsm', 'fsts', 'frstsaml', 'fstsm', 'frsts', 'sm', 'fstsamuel'], '2 samuel': ['scsamuel', 'secs', 'secsam', 'iis', 'scndsam', 'secondsm', 'secondsaml', 'seconds', '2ndsaml', '2nds', '2samuel', 'sesm', 'scndsamuel', '2ndsamuel', 'iism', 'secsm', 'secsa', '2sm', 'scsam', 'iisam', 'scsaml', 'scndsa', 'scs', '2ndsam', 'secondsam', 'iisaml', '2ndsm', '2saml', 'scnds', '2sam', 'secsamuel', 'secsaml', 'scndsaml', '2sa', 'sesaml', 'sesa', 'secondsamuel', 'scsm', 'iisa', 'scsa', 'ses', 'iisamuel', 'sesamuel', '2ndsa', '2s', 'scndsm', 'sesam', 'secondsa'], '1 kings': ['fstking', '1stks', 'kg', '1stking', 'frstk', 'kgs', '1kgs', 'frstkgs', '1stkings', 'fstkg', 'firstkn', '1kings', 'fstk', '1stkgs', '1kg', '1stkn', 'iki', 'firstkgs', '1king', 'frstkings', 'iking', 'frstks', 'ikings', '1ki', 'king', 'kn', 'frstkg', 'firstk', 'kings', 'ikgs', '1k', 'fstki', '1stkg', 'fstkn', 'ki', 'ikn', 'firstks', 'k', '1stki', 'fstkings', '1kn', 'firstkg', 'frstki', 'firstki', 'fstkgs', 'frstkn', 'fstks', '1ks', 'firstking', 'firstkings', 'ikg', 'iks', 'ik', 'ks', '1stk', 'frstking'], '2 kings': ['iikg', 'iikn', 'seks', 'scndkings', '2ks', 'scndki', 'secki', 'scndk', 'seki', 'secondks', 'scndkg', 'secondki', '2ndk', 'sckgs', 'secondking', 'seckings', 'scks', 'scking', 'iiki', '2ki', 'seckg', '2ndkg', 'secks', 'sek', '2ndkings', 'iikings', '2kg', 'seck', 'secondkg', 'secondk', 'scndkn', 'scndks', 'iiking', '2ndkgs', '2ndking', 'secondkgs', 'iik', 'sekgs', 'secondkings', 'sekg', 'sckings', 'secking', 'iiks', '2kings', 'secondkn', 'sekings', 'scndking', 'seking', 'scki', '2ndks', '2kgs', 'sckg', '2king', 'iikgs', 'sekn', 'sckn', '2kn', '2k', 'seckgs', 'scndkgs', '2ndki', 'seckn', '2ndkn', 'sck'], '1 chronicles': ['firstch', 'ichrs', 'frstchronicles', 'firstchro', 'chro', 'firstchronicle', '1chr', 'firstchron', '1chronicl', 'fstchs', '1chro', 'fstchronic', 'frstchro', '1chronicles', '1ch', 'fstchrs', 'ichron', 'frstchronicle', 'ichronicl', '1stchronicle', 'firstchrs', 'fstchronicl', '1stchro', '1stchroni', '1stchr', 'ich', '1stchs', '1chronicle', 'ichronicle', 'ichro', 'fstchr', 'chr', 'firstchr', 'fstchronicle', 'chronicl', 'frstchronic', 'chron', '1chs', 'firstchroni', '1stchronicles', 'fstchron', 'fstchronicles', 'ichronic', 'firstchronicles', '1chronic', 'frstchron', 'firstchronicl', '1stchrs', 'chrs', 'ichroni', 'fstchroni', 'chronic', 'frstchrs', 'firstchs', '1stchronic', 'frstchr', 'chs', 'fstch', 'frstch', '1stchron', 'fstchro', 'ichr', 'firstchronic', 'frstchs', '1chroni', 'frstchroni', '1stch', 'frstchronicl', '1chrs', 'ichronicles', 'chronicle', '1stchronicl', '1chron', 'chronicles', 'chroni', 'ichs'], '2 chronicles': ['iich', 'scchronicles', 'scndchronicl', 'iichronicl', '2chro', '2chronicles', 'secchs', 'iichrs', 'sechr', '2chronicle', 'iichro', 'sechron', 'scndchro', '2chr', 'secondchron', 'sech', 'sechronicle', 'scchronic', 'secch', 'secondchronicle', 'scchs', 'scchronicl', 'scndchroni', 'scndchron', '2chron', 'secchr', '2chs', '2ndchron', 'scchrs', 'scndchr', 'secchronic', 'secchron', 'scndchrs', 'sechronic', '2ndchronicl', 'sechrs', 'sechronicles', 'scchronicle', 'secondchro', 'scndchronic', 'sechro', 'secondch', 'secchronicl', '2ndchronic', '2ndchronicle', 'scndchronicle', '2ndchronicles', 'secondchronicl', 'sechronicl', '2chronicl', 'scchr', 'secondchrs', 'iichron', 'scchroni', '2ndchro', 'secondchs', 'iichronic', 'scchron', 'sechs', 'iichr', 'scch', '2chronic', 'secchronicle', 'secchronicles', 'secondchr', 'iichronicles', '2chrs', 'scndch', 'secondchroni', 'secondchronicles', '2ndch', 'secchroni', 'secchro', '2ch', '2ndchr', 'iichs', '2chroni', 'scchro', 'iichroni', 'secondchronic', 'secchrs', 'scndchs', '2ndchs', '2ndchroni', 'scndchronicles', 'iichronicle', 'sechroni', '2ndchrs'], 'ezra': ['ezra', 'ezr'], 'nehemiah': ['ne', 'nehemiah', 'neh'], 'esther': ['esth', 'est', 'es', 'esther'], 'job': ['job', 'jb'], 'psalms': ['psalms', 'psm', 'psalm', 'pslm', 'pss', 'ps', 'psa'], 'proverbs': ['proverbs', 'proverb', 'pro', 'pr', 'prv', 'prov', 'prvbs'], 'ecclesiastes': ['ecclesiaste', 'ecll', 'q', 'ecl', 'eccl', 'qoh', 'ecclesiastes', 'eclesiastes', 'ecc', 'ec', 'eccles', 'qoheleth', 'qo'], 'song of solomon': ['song of solomon', 'songofsolomon', 'song of sol', 'songofsol', 'the song of solomon', 'thesongofsolomon', 'the song of sol', 'thesongofsol', 'ss', 'canticle of canticles', 'conticleofcanticles', 'canticles', 'song of songs', 'songofsongs', 'song of', 'songof', 'solomon', 'song', 'sng', 'sos', 'so', 'sg'], 'isaiah': ['isah', 'isai', 'isaiah', 'isa'], 'jeremiah': ['je', 'jer', 'jere', 'jr', 'jeremaih', 'jeremiah'], 'lamentations': ['lamentations', 'la', 'lam', 'lamentation', 'lm'], 'ezekiel': ['ezk', 'ezekiel', 'ez', 'ezek', 'eze'], 'daniel': ['dn', 'dan', 'da', 'daniel'], 'hosea': ['hos', 'hs', 'ho', 'hosea'], 'joel': ['joe', 'joel', 'jo', 'jl'], 'amos': ['am', 'ams', 'amos', 'amo'], 'obadiah': ['obadaiah', 'ob', 'obad', 'obadiah', 'obd', 'oba', 'obadaih'], 'jonah': ['jonah', 'jnh', 'jon'], 'micah': ['mica', 'mic', 'mi', 'micah'], 'nahum': ['nah', 'na', 'nahum'], 'habakkuk': ['hbk', 'habbakkuk', 'hab', 'habakuk', 'habbakuk', 'hk', 'habakkuk'], 'zephaniah': ['zp', 'zep', 'zephaniah', 'zeph'], 'haggai': ['hagai', 'haggai', 'haggia', 'hagg', 'hag', 'hg'], 'zechariah': ['zc', 'zachariah', 'zechariah', 'zecharaiah', 'zech', 'zec'], 'malachi': ['mal', 'ml', 'malachi', 'ma'], 'matthew': ['matthew', 'matt', 'mt', 'mat', 'mathew'], 'mark': ['mk', 'mar', 'mark', 'mr', 'mrk'], 'luke': ['lk', 'lu', 'luke', 'luk'], 'john': ['jn', 'joh', 'john', 'j', 'jhn'], 'acts': ['act', 'ac', 'acts'], 'romans': ['rm', 'roman', 'romans', 'ro', 'rom'], '1 corinthians': ['1stcorinthian', 'frstcorinth', 'icortn', 'frstcortn', 'fstcori', 'fstcorinth', 'frstcorinthians', 'icorin', 'frstco', 'corinthi', 'icorinthians', 'icorinthian', 'frstcorinthi', '1stcori', 'corin', 'frstcorinthian', 'firstcorinthian', 'corinthians', '1stcor', 'firstcorinth', 'fstcorinthi', 'cor', 'fstcor', 'corinth', 'firstcorin', 'fstcorinthians', 'firstco', '1stcorinthians', '1corth', '1cortn', 'corinthian', 'corth', 'firstcori', 'ico', 'icorinthi', 'frstcorin', 'cori', 'icori', 'firstcorth', 'fstcortn', 'co', '1cor', 'firstcor', '1stcorinth', 'fstcorin', 'frstcorth', 'icorth', 'fstco', '1stcortn', '1stcorin', '1cori', 'fstcorth', 'icorinth', 'firstcorinthi', 'icor', 'fstcorinthian', '1stcorth', 'firstcorinthians', '1corinth', 'frstcor', 'firstcortn', 'cortn', '1stcorinthi', '1corinthians', '1corinthi', '1stco', '1corin', 'frstcori', '1co', '1corinthian'], '2 corinthians': ['2corinth', 'seccorinthian', 'secondcorinthi', 'secondcorinthians', 'sccorinthians', 'sccorinth', '2corinthi', 'secorinth', '2corin', '2cor', 'scndcorth', 'scndco', 'secondcor', 'scndcorinthi', 'scndcorin', 'seccorin', 'iicori', 'secondcorinth', 'iicorinth', '2ndcorinth', 'sccorth', '2co', 'sccori', 'secor', 'secco', 'secondco', 'iicor', 'secori', '2ndcorin', 'secortn', 'scndcori', 'secondcorin', 'iicorth', '2cortn', 'iicorinthian', '2ndcorinthi', 'seccorinthians', '2ndco', 'secondcori', 'secorinthi', 'iicorin', '2corth', 'scndcorinthians', 'sccor', '2ndcorinthians', '2ndcortn', 'seccorinth', '2ndcorinthian', 'iicorinthians', 'seccortn', '2ndcor', 'seccorinthi', '2ndcori', 'seco', 'secondcortn', 'scndcortn', '2corinthian', 'secondcorinthian', 'scndcor', 'secorinthian', 'sccorin', 'iico', 'sccorinthian', '2corinthians', 'secorth', 'secorin', 'scndcorinthian', '2cori', 'seccor', '2ndcorth', 'scndcorinth', 'iicorinthi', 'iicortn', 'secondcorth', 'sccortn', 'scco', 'seccori', 'sccorinthi', 'secorinthians', 'seccorth'], 'galatians': ['galat', 'galatians', 'ga', 'galatian', 'gal', 'galations', 'gl'], 'ephesians': ['ephe', 'ephesians', 'eph', 'ephs', 'ephesian', 'ephes', 'ep'], 'philippians': ['ph', 'philipians', 'php', 'phi', 'phillippians', 'philippians', 'phl', 'pp', 'philip', 'phil', 'phillipians', 'philipp'], 'colossians': ['cl', 'co', 'colossian', 'col', 'colosians', 'cs', 'colossians'], '1 thessalonians': ['1stthessalonions', '1stth', 'firstthessalonians', 'thessalonians', '1thessalonions', 'firstthessalonions', 'firstthessal', 'frstthes', 'thessalonions', 'frstthess', 'firstth', 'frstthessal', 'fstthessalonians', '1thessalonians', 'ithessalonions', 'fstthes', 'fstthessalonions', 'frstth', '1stthess', 'thessal', '1stthessal', 'ithes', '1thessal', '1thess', '1thes', 'fstth', 'ith', 'frstthessalonions', 'ithessalonians', 'th', 'frstthessalonians', '1stthessalonians', 'thes', 'fstthessal', 'ithessal', 'firstthes', '1stthes', 'firstthess', 'ithess', '1th', 'fstthess', 'thess'], '2 thessalonians': ['scthess', 'scthes', 'iith', 'secthess', 'sethessal', '2thes', 'scndth', 'secondthessalonions', 'secondthess', 'secondthessal', 'secondthes', 'iithessalonions', 'secthessalonians', 'secondth', 'sethessalonians', '2thess', 'scndthessalonions', 'iithessal', 'scthessal', 'seth', '2ndthess', '2thessalonians', 'secthessalonions', 'scth', '2ndthessalonians', 'scthessalonians', 'scndthessalonians', 'iithessalonians', 'scndthessal', 'iithes', '2thessal', '2ndth', 'secthes', 'scndthes', 'sethess', '2ndthessalonions', '2ndthessal', '2ndthes', '2thessalonions', 'secondthessalonians', 'secth', 'secthessal', 'scthessalonions', 'iithess', 'sethes', 'sethessalonions', 'scndthess', '2th'], '1 timothy': ['tim', '1sttimothy', 'firsttimoth', 'itimoth', 'itimothy', 'iti', 'fsttimothy', 'frstti', 'fsttm', 'tm', '1sttimoth', 'timoth', '1stti', 'itim', '1ti', 'frsttimothy', 'fsttimoth', 'firstti', '1tim', 'fsttim', '1timothy', 'itm', 'timothy', 'firsttimothy', 'firsttm', '1sttm', '1tm', 'firsttim', 'frsttm', '1sttim', 'fstti', 'frsttim', '1timoth', 'frsttimoth'], '2 timothy': ['sctim', 'sectimothy', '2ndtimoth', 'iitimoth', 'scndtm', '2ti', 'sctimothy', 'secondti', 'seti', 'iiti', 'setim', '2ndtm', 'secti', 'sectimoth', 'scndtimoth', 'iitimothy', 'scti', 'setimothy', 'sectim', 'sectm', '2ndtimothy', 'iitm', '2tim', '2timoth', 'setimoth', '2ndtim', 'sctimoth', 'secondtimothy', '2ndti', 'setm', 'iitim', 'scndti', 'scndtimothy', 'scndtim', 'secondtim', '2tm', 'secondtm', '2timothy', 'secondtimoth', 'sctm'], 'titus': ['tit', 'titus', 'ti', 'tt'], 'philemon': ['phillemon', 'phlm', 'pm', 'phm', 'philemon', 'philem', 'philm', 'phile'], 'hebrews': ['hebrew', 'hebrews', 'he', 'hb', 'heb'], 'james': ['jms', 'jm', 'ja', 'jas', 'jam', 'james', 'jame'], '1 peter': ['ptr', '1p', 'frstpete', 'firstpe', '1stpet', 'firstp', '1peter', '1stpete', '1stpetr', 'fstpete', 'petr', 'firstpete', 'fstpeter', 'pet', 'fstpe', 'pete', 'frstpe', 'firstpetr', 'frstptr', 'iptr', '1pt', 'ipe', 'firstptr', 'fstpt', 'pe', 'ip', '1stpt', 'ipt', 'fstptr', '1ptr', 'frstpetr', '1stp', 'fstpet', 'peter', 'frstpeter', '1pe', 'frstpet', '1petr', 'fstp', '1stpe', 'pt', 'ipet', 'fstpetr', '1stptr', 'frstp', 'firstpeter', 'firstpt', 'firstpet', 'frstpt', '1pete', 'ipeter', '1stpeter', 'ipete', 'p', 'ipetr', '1pet'], '2 peter': ['secpe', 'scptr', '2pt', 'sepeter', 'secptr', 'iipete', '2ndptr', 'secpetr', 'secondp', 'scpe', 'scndpt', '2ndpe', 'sep', 'scp', 'secondpeter', 'iipetr', '2ndpt', '2petr', 'sept', 'scndpeter', 'scpete', 'scndpete', 'sepete', 'scpetr', 'scpet', 'secpet', 'scpeter', '2ndpetr', 'septr', 'sepetr', '2ndpet', 'sepe', 'scndpet', 'secpt', 'scndpetr', 'sepet', '2p', 'scndpe', '2peter', '2pete', '2ndp', 'scndptr', 'secpeter', 'secp', '2pe', 'iipt', 'iipeter', 'scndp', 'iiptr', '2ptr', '2pet', 'secondpt', 'secondpetr', '2ndpete', 'secondpete', '2ndpeter', 'iipet', 'secpete', 'scpt', 'iip', 'secondpet', 'secondpe', 'secondptr', 'iipe'], '1 john': ['1jn', 'frstj', '1stjo', '1jhn', 'firstj', 'firstjn', 'frstjo', '1stjoh', '1john', '1stjn', 'firstjoh', 'frstjoh', 'fstjohn', '1stjohn', 'firstjo', 'fstj', 'ijo', 'fstjhn', '1stjhn', '1joh', 'firstjhn', 'frstjn', 'fstjn', 'ijhn', 'ijn', 'frstjohn', 'firstjohn', '1jo', 'ijohn', 'fstjo', '1stj', 'frstjhn', 'ij', 'fstjoh', '1j', 'ijoh'], '2 john': ['sejhn', 'scndjhn', 'scj', 'sejoh', '2ndjhn', 'secondjohn', 'secondjo', 'secjhn', '2jhn', 'sejo', 'secondjn', 'scjhn', 'sej', 'iijoh', 'iij', '2ndjo', '2jn', 'iijhn', '2jo', 'scjo', 'scjoh', 'secondjhn', 'secjn', 'scndjn', 'iijn', 'scjohn', '2ndjoh', '2j', '2ndj', 'secondj', 'iijohn', 'secjohn', '2joh', 'iijo', '2ndjohn', 'scndjohn', 'scndj', 'scndjoh', 'scjn', 'secjoh', 'sejohn', 'secj', 'scndjo', '2ndjn', '2john', 'sejn', 'secondjoh', 'secjo'], '3 john': ['iiijoh', '3rdj', '3jn', 'iiijn', '3joh', 'iiijohn', '3rdjo', 'thjoh', '3rdjohn', 'thirjohn', 'thijo', 'thirdj', 'thirjn', 'thirjoh', 'thirdjohn', 'thijoh', 'iiijhn', '3jo', 'thijn', 'thijohn', 'thjo', 'thirj', '3john', 'thijhn', 'thirdjoh', 'thirdjn', 'thirjo', '3rdjhn', '3rdjoh', 'thij', 'thirjhn', 'thjhn', '3j', 'thjohn', '3rdjn', 'thirdjo', 'iiijo', 'iiij', 'thirdjhn', 'thjn', '3jhn', 'thj'], 'jude': ['ju', 'jude', 'jd', 'jud'], 'revelation': ['rv', 'revelations', 'the revelation', 're', 'rev', 'revelation'] };

var BOOK_LENGTHS = { 'genesis': [31, 25, 24, 26, 32, 22, 24, 22, 29, 32, 32, 20, 18, 24, 21, 16, 27, 33, 38, 18, 34, 24, 20, 67, 34, 35, 46, 22, 35, 43, 55, 32, 20, 31, 29, 43, 36, 30, 23, 23, 57, 38, 34, 34, 28, 34, 31, 22, 33, 26], 'exodus': [22, 25, 22, 31, 23, 30, 25, 32, 35, 29, 10, 51, 22, 31, 27, 36, 16, 27, 25, 26, 36, 31, 33, 18, 40, 37, 21, 43, 46, 38, 18, 35, 23, 35, 35, 38, 29, 31, 43, 38], 'leviticus': [17, 16, 17, 35, 19, 30, 38, 36, 24, 20, 47, 8, 59, 57, 33, 34, 16, 30, 37, 27, 24, 33, 44, 23, 55, 46, 34], 'numbers': [54, 34, 51, 49, 31, 27, 89, 26, 23, 36, 35, 16, 33, 45, 41, 50, 13, 32, 22, 29, 35, 41, 30, 25, 18, 65, 23, 31, 40, 16, 54, 42, 56, 29, 34, 13], 'deuteronomy': [46, 37, 29, 49, 33, 25, 26, 20, 29, 22, 32, 32, 18, 29, 23, 22, 20, 22, 21, 20, 23, 30, 25, 22, 19, 19, 26, 68, 29, 20, 30, 52, 29, 12], 'joshua': [18, 24, 17, 24, 15, 27, 26, 35, 27, 43, 23, 24, 33, 15, 63, 10, 18, 28, 51, 9, 45, 34, 16, 33], 'judges': [36, 23, 31, 24, 31, 40, 25, 35, 57, 18, 40, 15, 25, 20, 20, 31, 13, 31, 30, 48, 25], 'ruth': [22, 23, 18, 22], '1 samuel': [28, 36, 21, 22, 12, 21, 17, 22, 27, 27, 15, 25, 23, 52, 35, 23, 58, 30, 24, 42, 15, 23, 29, 22, 44, 25, 12, 25, 11, 31, 13], '2 samuel': [27, 32, 39, 12, 25, 23, 29, 18, 13, 19, 27, 31, 39, 33, 37, 23, 29, 33, 43, 26, 22, 51, 39, 25], '1 kings': [53, 46, 28, 34, 18, 38, 51, 66, 28, 29, 43, 33, 34, 31, 34, 34, 24, 46, 21, 43, 29, 53], '2 kings': [18, 25, 27, 44, 27, 33, 20, 29, 37, 36, 21, 21, 25, 29, 38, 20, 41, 37, 37, 21, 26, 20, 37, 20, 30], '1 chronicles': [54, 55, 24, 43, 26, 81, 40, 40, 44, 14, 47, 40, 14, 17, 29, 43, 27, 17, 19, 8, 30, 19, 32, 31, 31, 32, 34, 21, 30], '2 chronicles': [17, 18, 17, 22, 14, 42, 22, 18, 31, 19, 23, 16, 22, 15, 19, 14, 19, 34, 11, 37, 20, 12, 21, 27, 28, 23, 9, 27, 36, 27, 21, 33, 25, 33, 27, 23], 'ezra': [11, 70, 13, 24, 17, 22, 28, 36, 15, 44], 'nehemiah': [11, 20, 32, 23, 19, 19, 73, 18, 38, 39, 36, 47, 31], 'esther': [22, 23, 15, 17, 14, 14, 10, 17, 32, 3], 'job': [22, 13, 26, 21, 27, 30, 21, 22, 35, 22, 20, 25, 28, 22, 35, 22, 16, 21, 29, 29, 34, 30, 17, 25, 6, 14, 23, 28, 25, 31, 40, 22, 33, 37, 16, 33, 24, 41, 30, 24, 34, 17], 'psalms': [6, 12, 8, 8, 12, 10, 17, 9, 20, 18, 7, 8, 6, 7, 5, 11, 15, 50, 14, 9, 13, 31, 6, 10, 22, 12, 14, 9, 11, 12, 24, 11, 22, 22, 28, 12, 40, 22, 13, 17, 13, 11, 5, 26, 17, 11, 9, 14, 20, 23, 19, 9, 6, 7, 23, 13, 11, 11, 17, 12, 8, 12, 11, 10, 13, 20, 7, 35, 36, 5, 24, 20, 28, 23, 10, 12, 20, 72, 13, 19, 16, 8, 18, 12, 13, 17, 7, 18, 52, 17, 16, 15, 5, 23, 11, 13, 12, 9, 9, 5, 8, 28, 22, 35, 45, 48, 43, 13, 31, 7, 10, 10, 9, 8, 18, 19, 2, 29, 176, 7, 8, 9, 4, 8, 5, 6, 5, 6, 8, 8, 3, 18, 3, 3, 21, 26, 9, 8, 24, 13, 10, 7, 12, 15, 21, 10, 20, 14, 9, 6], 'proverbs': [33, 22, 35, 27, 23, 35, 27, 36, 18, 32, 31, 28, 25, 35, 33, 33, 28, 24, 29, 30, 31, 29, 35, 34, 28, 28, 27, 28, 27, 33, 31], 'ecclesiastes': [18, 26, 22, 16, 20, 12, 29, 17, 18, 20, 10, 14], 'song of solomon': [17, 17, 11, 16, 16, 13, 13, 14], 'isaiah': [31, 22, 26, 6, 30, 13, 25, 22, 21, 34, 16, 6, 22, 32, 9, 14, 14, 7, 25, 6, 17, 25, 18, 23, 12, 21, 13, 29, 24, 33, 9, 20, 24, 17, 10, 22, 38, 22, 8, 31, 29, 25, 28, 28, 25, 13, 15, 22, 26, 11, 23, 15, 12, 17, 13, 12, 21, 14, 21, 22, 11, 12, 19, 12, 25, 24], 'jeremiah': [19, 37, 25, 31, 31, 30, 34, 22, 26, 25, 23, 17, 27, 22, 21, 21, 27, 23, 15, 18, 14, 30, 40, 10, 38, 24, 22, 17, 32, 24, 40, 44, 26, 22, 19, 32, 21, 28, 18, 16, 18, 22, 13, 30, 5, 28, 7, 47, 39, 46, 64, 34], 'lamentations': [22, 22, 66, 22, 22], 'ezekiel': [28, 10, 27, 17, 17, 14, 27, 18, 11, 22, 25, 28, 23, 23, 8, 63, 24, 32, 14, 49, 32, 31, 49, 27, 17, 21, 36, 26, 21, 26, 18, 32, 33, 31, 15, 38, 28, 23, 29, 49, 26, 20, 27, 31, 25, 24, 23, 35], 'daniel': [21, 49, 30, 37, 31, 28, 28, 27, 27, 21, 45, 13], 'hosea': [11, 23, 5, 19, 15, 11, 16, 14, 17, 15, 12, 14, 16, 9], 'joel': [20, 32, 21], 'amos': [15, 16, 15, 13, 27, 14, 17, 14, 15], 'obadiah': [21], 'jonah': [17, 10, 10, 11], 'micah': [16, 13, 12, 13, 15, 16, 20], 'nahum': [15, 13, 19], 'habakkuk': [17, 20, 19], 'zephaniah': [18, 15, 20], 'haggai': [15, 23], 'zechariah': [21, 13, 10, 14, 11, 15, 14, 23, 17, 12, 17, 14, 9, 21], 'malachi': [14, 17, 18, 6], 'matthew': [25, 23, 17, 25, 48, 34, 29, 34, 38, 42, 30, 50, 58, 36, 39, 28, 27, 35, 30, 34, 46, 46, 39, 51, 46, 75, 66, 20], 'mark': [45, 28, 35, 41, 43, 56, 37, 38, 50, 52, 33, 44, 37, 72, 47, 20], 'luke': [80, 52, 38, 44, 39, 49, 50, 56, 62, 42, 54, 59, 35, 35, 32, 31, 37, 43, 48, 47, 38, 71, 56, 53], 'john': [51, 25, 36, 54, 47, 71, 53, 59, 41, 42, 57, 50, 38, 31, 27, 33, 26, 40, 42, 31, 25], 'acts': [26, 47, 26, 37, 42, 15, 60, 40, 43, 48, 30, 25, 52, 28, 41, 40, 34, 28, 41, 38, 40, 30, 35, 27, 27, 32, 44, 31], 'romans': [32, 29, 31, 25, 21, 23, 25, 39, 33, 21, 36, 21, 14, 23, 33, 27], '1 corinthians': [31, 16, 23, 21, 13, 20, 40, 13, 27, 33, 34, 31, 13, 40, 58, 24], '2 corinthians': [24, 17, 18, 18, 21, 18, 16, 24, 15, 18, 33, 21, 14], 'galatians': [24, 21, 29, 31, 26, 18], 'ephesians': [23, 22, 21, 32, 33, 24], 'philippians': [30, 30, 21, 23], 'colossians': [29, 23, 25, 18], '1 thessalonians': [10, 20, 13, 18, 28], '2 thessalonians': [12, 17, 18], '1 timothy': [20, 15, 16, 16, 25, 21], '2 timothy': [18, 26, 17, 22], 'titus': [16, 15, 15], 'philemon': [25], 'hebrews': [14, 18, 19, 16, 14, 20, 28, 13, 28, 39, 40, 29, 25], 'james': [27, 26, 18, 17, 20], '1 peter': [25, 25, 22, 19, 14], '2 peter': [21, 22, 18], '1 john': [10, 29, 24, 21, 21], '2 john': [13], '3 john': [15], 'jude': [25], 'revelation': [20, 29, 22, 11, 14, 17, 17, 13, 21, 11, 19, 17, 18, 20, 8, 21, 18, 24, 21, 15, 27, 21] };

var LOADING_SVG = ['<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100% 100%">', '  <text fill="%23514d47" x="50%" y="50%" font-family="Helvetica, Arial, sans-serif" font-size="14" text-anchor="middle">Loading...</text>', '</svg>'].join(''); var IFRAME_WIDTH = 300; var IFRAME_HEIGHT = 200; var IFRAME_BORDER_COLOR = get_border_color_option_value() || 'e5e5e5'; var IFRAME_BORDER_RADIUS = get_border_radius_option_value() || 10; var IFRAME_CSS = ['iframe.esv-crossref {', '  border: 1px solid #' + IFRAME_BORDER_COLOR + ';', '  border-radius: ' + IFRAME_BORDER_RADIUS + 'px;', '  position: absolute;', '  z-index: 9999;', '  top: -9999px;', '  left: -9999px;', '  width: ' + IFRAME_WIDTH + 'px;', '  height: ' + IFRAME_HEIGHT + 'px;', '  display: block;', "  background: #fff url('data:image/svg+xml;charset=utf-8," + LOADING_SVG + "') 0px 0px no-repeat;", '}'].join('\n'); var IS_TOUCH_DEVICE = 'ontouchstart' in window; function get_border_color_option_value() { var options = window.ESV_CROSSREF_OPTIONS || {}; var border_color = options.border_color || ''; return /[\da-f]{6}/i.test(border_color.slice(0, 6)) ? border_color : null; }

function get_border_radius_option_value() { var options = window.ESV_CROSSREF_OPTIONS || {}; var border_radius = options.border_radius || ''; return /^\d+$/.test(border_radius) ? border_radius : null; }
function add_css() { var style_el = document.createElement('style'); style_el.setAttribute('type', 'text/css'); style_el.innerHTML = IFRAME_CSS; document.head.appendChild(style_el); }
function get_display_options() {
    if (!window.ESV_CROSSREF_OPTIONS) { return ''; }
    var param_string = '?'; var options = window.ESV_CROSSREF_OPTIONS; for (var k in options) {
        if (VALID_OPTIONS.indexOf(k) === -1) { continue; }
        param_string += k + '=' + encodeURIComponent(options[k]) + '&';
    }
    return param_string.slice(0, -1);
}
function add_tooltip(el) {
    var iframe_el = document.createElement('iframe'); var url = BASE_IFRAME_URL + el.ESV_PASSAGE + '/' + get_display_options(); iframe_el.setAttribute('src', url); iframe_el.setAttribute('class', 'esv-crossref'); iframe_el.addEventListener('mouseenter', function () { clearTimeout(el.ESV_TIMEOUT_ID); }); iframe_el.addEventListener('mouseleave', function () { el.tooltip_el.style.display = 'none'; }); if (IS_TOUCH_DEVICE) { document.addEventListener('touchstart', hide_all); } else { document.addEventListener('click', hide_all); }
    document.body.appendChild(iframe_el); el.ESV_FETCHED = true; el.tooltip_el = iframe_el;
}
function get_position(el) {
    var rect = el.getBoundingClientRect(); var x = rect.left + rect.width + 4; var y = rect.top + rect.height + 4; if (x + IFRAME_WIDTH > window.innerWidth) { x = window.innerWidth - IFRAME_WIDTH; }
    if (y + IFRAME_HEIGHT > window.innerHeight) { y = window.innerHeight - IFRAME_HEIGHT; }
    return { x: x + window.pageXOffset, y: y + window.pageYOffset };
}
function show(e) {
    e.preventDefault(); var el = e.target; hide_all(el.tooltip_el); if (!el.ESV_FETCHED) { add_tooltip(el); }
    var position = get_position(el); el.tooltip_el.style.left = position.x + 'px'; el.tooltip_el.style.top = position.y + 'px'; el.tooltip_el.style.display = 'block';
}
function hide(e) { var el = e.target; el.ESV_TIMEOUT_ID = setTimeout(function () { el.tooltip_el.style.display = 'none'; }, 300); }

function hide_all(skip_el) {
    var els = document.querySelectorAll('iframe.esv-crossref'); var els_array = [].slice.call(els); els_array.forEach(function (el) {
        if (el === skip_el) { return; }
        el.style.display = 'none';
    });
}

function attach(el) {
    if (el.ESV_PASSAGE) { return; }
    el.ESV_FETCHED = false; el.ESV_TIMEOUT_ID = null; el.ESV_PASSAGE = el.textContent; if (IS_TOUCH_DEVICE) { el.addEventListener('click', show); } else { el.addEventListener('mouseenter', show); el.addEventListener('mouseleave', hide); }
    return el;
}

function make_link_el(passage) { var link_el = document.createElement('a'); var href = BASE_ESV_URL + encodeURIComponent(passage) + '/'; link_el.innerHTML = passage; link_el.setAttribute('href', href); link_el.setAttribute('target', '_blank'); link_el.setAttribute('style', 'color: #72abbf;'); link_el.setAttribute('class', 'esv-crossref-link'); return link_el; }
function linkify_node(node, matches) { matches.forEach(function (match) { var index = node.textContent.indexOf(match); var end_node = node.splitText(index); var link_el = attach(make_link_el(match)); node.parentNode.insertBefore(link_el, end_node); end_node.textContent = end_node.textContent.slice(match.length); node = end_node; }); }
function ignore_filter(node) {
    if (node.nodeType === Node.ELEMENT_NODE) { var ignore_by_tag = IGNORE_TAGS.indexOf(node.tagName) !== -1; var ignore_by_class = node.classList.contains(IGNORE_CLASS); var ignore = ignore_by_tag || ignore_by_class; return ignore ? NodeFilter.FILTER_REJECT : NodeFilter.FILTER_ACCEPT; }
    if (node.nodeType === Node.TEXT_NODE && !node.textContent.trim()) { return NodeFilter.FILTER_REJECT; }
    return NodeFilter.FILTER_ACCEPT;
}
function sanitize_ref(ref) { ref = ref.replace(/ /g, '').replace(/[â€â€‘â€’â€“â€”-]/g, '-'); return ref.replace(/\./g, ':').toLowerCase(); }
function get_book(ref) { ref = ref.replace(':', ''); var book_part = ref.substring(0, ref.search(/\w\d/) + 1); for (var k in BOOK_NAME_MAP) { if (BOOK_NAME_MAP[k].indexOf(book_part) !== -1) { return k; } } }
function normalize_single_chapter_ref(ref) {
    var semi_parts = ref.split(';'); if (semi_parts[0].indexOf(':') === -1) { var number_start = semi_parts[0].search(/[\w\s]\d/) + 1; var before = semi_parts[0].slice(0, number_start); var after = semi_parts[0].slice(number_start); semi_parts[0] = before + '1:' + after; }
    return semi_parts.join(';');
}
function normalize_commas(range_part) {
    var parts = range_part.split(','); for (var i = 1; i < parts.length; i++) {
        if (parts[i].indexOf(':') !== -1) { continue; }
        if (parts[0].indexOf(':') === -1) { if (parts[i].indexOf('-') === -1) { parts[i] = parts[i] + ':1'; } } else { parts[i] = parts[0].split(':')[0].split('-')[0] + ':' + parts[i]; }
    }
    return parts.join(';');
}
function get_ranges(ref) {
    ref = ref.slice(1); var range_part = ref.slice(ref.search(/\d/)); range_part = normalize_commas(range_part); var semi_parts = range_part.split(/;/g); range_part = semi_parts[0]; semi_parts = semi_parts.slice(1); var ranges = []; var dash_parts = range_part.split('-'); var start_parts = dash_parts[0].split(':'); ranges.push(dash_parts[0] + (start_parts.length === 2 ? '' : ':1')); if (dash_parts.length === 2) { var end_parts = dash_parts[1].split(':'); var has_verse = end_parts.length === 2; if (start_parts.length === 2) { ranges.push((has_verse ? '' : start_parts[0] + ':') + dash_parts[1]); } else { ranges.push(dash_parts[1] + (has_verse ? '' : ':1')); } }
    var last_chapter; for (var i = 0; i < semi_parts.length; i++) {
        last_chapter = ranges[ranges.length - 1].split(':')[0]; if (semi_parts[i].split('-')[0].indexOf(':') === -1) { if (range_part.indexOf(':') === -1) { semi_parts[i] = semi_parts[i] + ':' + 1; } }
        ranges = ranges.concat(get_ranges('Book' + semi_parts[i]));
    }
    return ranges;
}
function validate_ref(ref) {
    ref = sanitize_ref(ref); var book = get_book(ref); if (!book) { return false; }
    if (BOOK_LENGTHS[book].length === 1) { ref = normalize_single_chapter_ref(ref); }
    var ranges = get_ranges(ref); var verse; var chapter; for (var i = 0; i < ranges.length; i++) {
        chapter = ranges[i].split(':')[0]; verse = ranges[i].split(':')[1]; if (chapter.match(/[a-e]/g)) { return false; }
        if (chapter.indexOf('ff') !== -1) { return false; }
        if ((ranges.join(' ').match(/ff/g) || []).length > 1) { return false; }
        chapter = parseInt(chapter, 10); verse = parseInt(verse, 10); if (chapter === 0 || verse === 0) { return false; }
        if (chapter > BOOK_LENGTHS[book].length) { return false; }
        if (verse > BOOK_LENGTHS[book][chapter - 1]) { return false; }
    }
    return true;
}
function linkify_dom() {
    var root_node = document.body; var match_data = []; var to_show = window.NodeFilter.SHOW_ALL; var filter = { 'acceptNode': ignore_filter }; var walker = document.createTreeWalker(root_node, to_show, filter, false); while (walker.nextNode()) {
        if (walker.currentNode.nodeType !== Node.TEXT_NODE) { continue; }
        var matches = walker.currentNode.textContent.match(REGEX) || []; match_data.push([walker.currentNode, matches.filter(validate_ref)]);
    }
    match_data.forEach(function (match_datum) { linkify_node(match_datum[0], match_datum[1]); });
}

const delay_milliseconds = 3000;

window.addEventListener('load', function () {
console.log("Running custom ESV script in", delay_milliseconds, "milliseconds on 'load'");

    this.setTimeout(function () {
        linkify_dom();
    }, delay_milliseconds);

    add_css();
});

window.addEventListener('esv-crossref.trigger-linkify', function () {
console.log("Running custom ESV script in", delay_milliseconds, "milliseconds on 'esv-crossref.trigger-linkify'");
    this.setTimeout(function () {
        linkify_dom();
    }, delay_milliseconds);
});
